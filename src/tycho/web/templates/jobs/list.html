{% extends "base.html" %}
{% block title %}Jobs â€” Tycho{% endblock %}
{% block content %}
<h2>Jobs <small>({{ total }} total)</small></h2>

<form id="filter-form" hx-get="/jobs" hx-target="#job-table" hx-push-url="true" role="group">
    <input type="search" name="search" value="{{ search }}" placeholder="Search title, company, location...">
    <select name="status">
        <option value="">All statuses</option>
        {% for s in statuses %}
        <option value="{{ s }}" {% if status == s %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
    </select>
    <input type="number" name="min_score" value="{{ min_score if min_score is not none else '' }}" placeholder="Min score" step="0.05" min="0" max="1" style="max-width:120px">
    <button type="submit">Filter</button>
</form>

<form id="bulk-form" hx-post="/jobs/bulk-status" hx-target="#job-table" hx-swap="innerHTML">
    <div role="group" class="bulk-bar">
        <label>
            <input type="checkbox" id="select-all"> Select all
        </label>
        <select name="new_status">
            {% for s in statuses %}
            <option value="{{ s }}">{{ s }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="secondary">Bulk Update</button>
    </div>
</form>

<div id="job-table">
    {% include "jobs/_table.html" %}
</div>
{% endblock %}
